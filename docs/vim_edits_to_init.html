<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Old init.vim excerpts</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Old init.vim excerpts</h1>

</div>


<p>TIP: Renaming using vim: <a href="https://vi.stackexchange.com/questions/18004/renaming-variables" class="uri">https://vi.stackexchange.com/questions/18004/renaming-variables</a> My own autopairs <a href="https://stackoverflow.com/questions/13404602/how-to-prevent-esc-from-waiting-for-more-input-in-insert-mode" class="uri">https://stackoverflow.com/questions/13404602/how-to-prevent-esc-from-waiting-for-more-input-in-insert-mode</a> <a href="https://vim.fandom.com/wiki/Automatically_append_closing_characters" class="uri">https://vim.fandom.com/wiki/Automatically_append_closing_characters</a> (see the plugins at the end of the webpage) “NOTE: Unless both ( and (<CR> are bound, FastEscape won’t affect them. In”other words, if only the character itself is bound rather than a key sequence “starting with the character, FastEscape is ignored! That’s awesome. augroup FastEscape autocmd! au InsertEnter * set timeoutlen=500 au InsertLeave * set timeoutlen=1000 augroup END Autopair mappings: <a href="https://vim.fandom.com/wiki/Automatically_append_closing_characters" class="uri">https://vim.fandom.com/wiki/Automatically_append_closing_characters</a></p>
<p>Example for Vim. Vim indents on a line following :fu. <C-d> deletes the indentation, then <C-o> inserts a line above that is auto-indented “inoremap (<CR> (<CR><C-d>)<C-o>O</p>
<p>Note that submodes can not accommodate counts. You could investigate tinykeymap, but I couldn’t get window movement to work: <a href="https://github.com/vim-scripts/tinykeymap/blob/master/autoload/tinykeymap/map/windows.vim" class="uri">https://github.com/vim-scripts/tinykeymap/blob/master/autoload/tinykeymap/map/windows.vim</a> Doing so would enable proper use of c-w x, for swapping w/ the n-th window Submodes also don’t seem to support commands in {RHS}</p>
<p>Using tmux and vim: <a href="https://statico.github.io/vim3.html" class="uri">https://statico.github.io/vim3.html</a> The example here is a vim binding to execute the previous command in a terminal’s command histroy. It relies on tmux to send keys between terminals. This is useful if you’re editing a script and want to test it. Of course, this can probably be done in vim directly.</p>
<p>For LSP with R, see either LanguageClient-neovim or coc-r-lsp and coc.nvim: <a href="https://cran.r-project.org/web/packages/languageserver/readme/README.html" class="uri">https://cran.r-project.org/web/packages/languageserver/readme/README.html</a> Note that only LC-neovim, not coc.nvim, is designed to integrate with ncm2 and thus ncm-r. ALthough code is provided to integrate somewhat: <a href="https://github.com/ncm2/ncm2/issues/51" class="uri">https://github.com/ncm2/ncm2/issues/51</a> Is this true? What about b:coc_suggest_disable? Or is this issue using coc for completion? <a href="https://cran.r-project.org/web/packages/languageserver/readme/README.html" class="uri">https://cran.r-project.org/web/packages/languageserver/readme/README.html</a> General tutorial: <a href="https://jacky.wtf/weblog/language-client-and-neovim/" class="uri">https://jacky.wtf/weblog/language-client-and-neovim/</a> Consider coc.nvim for other languages: <a href="https://www.narga.net/how-to-set-up-code-completion-for-vim/#why_is_cocvim" class="uri">https://www.narga.net/how-to-set-up-code-completion-for-vim/#why_is_cocvim</a> syntastics vs ale vs coc.nvim</p>
<p>Windoes management sucks. See: <a href="https://github.com/spolu/dwm.vim" class="uri">https://github.com/spolu/dwm.vim</a> <a href="https://www.reddit.com/r/vim/comments/3htkd7/rotate_windows_clockwise_anticlockwise/" class="uri">https://www.reddit.com/r/vim/comments/3htkd7/rotate_windows_clockwise_anticlockwise/</a></p>
<p>Neovim GUIs and packages: <a href="https://github.com/neovim/neovim/wiki/Related-projects" class="uri">https://github.com/neovim/neovim/wiki/Related-projects</a></p>
<p>Example of calling function from command (see f-args) function! MyEdit(x) &quot; Disable partial matching for :sb and avoid errors for non-matches if bufexists(a:x) execute ‘sb’ a:x else execute ‘buffer’ a:x endif endfunction command! -bang -nargs=1 Test call MyEdit(<f-args>)</p>
<p>TODO: Parse lines to get keys bound to each submode, invert, write vim commands, save to file, then source in vim By default, any unbound key exits the mode. Therefore, to prevent any key but the desired exit key from leaving the submode, bind all unused keys to <Nop>. See submode#unmap function! s:getmap() silent !rm -f ~/.config/nvim/map.txt redir &gt; ~/.config/nvim/map.txt silent map redir END endfunction autocmd VimEnter * call s:getmap()</p>
<p>function! s:csk() silent !rm -f temp redir &gt; temp silent echo ctrlspace#keys#KeyMap() redir END endfunction autocmd VimEnter * call s:csk()</p>
<p>Tags (in R) <a href="https://docs.ctags.io/en/latest/index.htmf" class="uri">https://docs.ctags.io/en/latest/index.htmf</a> <a href="https://ricostacruz.com/til/navigate-code-with-ctags" class="uri">https://ricostacruz.com/til/navigate-code-with-ctags</a> (see shortcuts) <a href="https://www.fusionbox.com/blog/detail/navigating-your-django-project-with-vim-and-ctags/590/" class="uri">https://www.fusionbox.com/blog/detail/navigating-your-django-project-with-vim-and-ctags/590/</a> <a href="https://vim.fandom.com/wiki/Browsing_programs_with_tags" class="uri">https://vim.fandom.com/wiki/Browsing_programs_with_tags</a>&quot; <a href="https://github.com/lyuts/vim-rtags" class="uri">https://github.com/lyuts/vim-rtags</a></p>
<p>You can generate tags for R in ctags, or use rtags and etags2ctags <a href="https://tinyheero.github.io/2017/05/13/r-vim-ctags.html" class="uri">https://tinyheero.github.io/2017/05/13/r-vim-ctags.html</a> <a href="https://stackoverflow.com/questions/4794859/exuberant-ctags-with-r" class="uri">https://stackoverflow.com/questions/4794859/exuberant-ctags-with-r</a> etags2ctags is provided by nvim-r</p>
<p>function! <SID>NewOrOpen() let ntbufl = filter(map(tabpagebuflist(tabpagenr()), ‘getbufinfo(v:val)[0]’), ‘has_key(v:val.variables, “neoterm_id”)’) if len(ntbufl) &gt; 0 &quot; let ntbuf = ntbufl[0].bufnr &quot; exec g:neoterm_default_mod.‘split’.bufname(ntbuf) Topen else Tnew endif endfunction nnoremap <localleader>o :<c-u>call <SID>NewOrOpen()<CR></p>
<p>Reason for double backslashes: |literal-string| or the paragraph above |expr5|. This seems similar to R’s need for double backslashes. In R, string processing is followed by regex processing when using a regex function. In VIM, it seems that double qutoes, rather than a regex function like grep(), are the trigger. Here are examples from my edits to the neoterm plugin: let pycommand = filter(a:command, ’v:val !~ “^\s*$“‘) let prev_indent = len(matchstr(prev_line,’^’))</p>
<p>= Neoterm =</p>
<p>&quot; Input is sent to the last active terminal or the terminal whose ID matches &quot; the numeric prefix of the command. Note that :[N]<command> really means &quot; press N, then :<command>. If you want to allow a numeric prefix in mapped &quot; commands, don’t use <c-u> to clear the range. &quot; neoterm automatically increments the termid for each new terminal made &quot; by :Tnew. This makes using commands that take termid as a range/count &quot; difficult, beause there’s the counter doesn’t decrement after killing a &quot; terminal (as opposed to hiding it). An alternative is to associate each &quot; terminal with a tab and to omit counts altogether, using &quot; g:neoterm_term_per_tab. Using :Topen or :Ttoggle instead &quot; of :Tnew ensures only one terminal per tab.</p>
<p>&quot; Note. If full text isn’t showing up in terminal, but no errors are thrown, &quot; increase sleep. function! Test(…) range &quot; if (g:neoterm_repl_command =~ ‘ipython’) let lines = getline(a:firstline, a:lastline) call neoterm#exec({‘cmd’: [‘%cpaste -q’, ’’]}) sleep 100m call neoterm#exec({‘cmd’: add(lines, ‘’)}) sleep 100m call neoterm#exec({’cmd’: [‘–’, ’’]}) &quot; endif endfunction</p>
<p>map <localleader>z :call Test()<cr></p>
<div id="from-my-macos-nvim-config" class="section level2">
<h2>From my macOS nvim config</h2>
<p>&quot; nvim-gdb configuration &quot; disable dd, dl, and db; configure dpy to use python3 instead of python2 let g:nvimgdb_disable_start_keymaps=1 nnoremap <leader>dpy :GdbStartPDB python3 -m pdb main.py &quot; Disable these key (re?)mappings in Terminal mode; enable in normal let g:nvimgdb_config_override = {  ‘key_until’: ‘<leader>du’,  ‘key_continue’: ‘<leader>dc’,  ‘key_next’: ‘<leader>dn’,  ‘key_step’: ‘<leader>ds’,  ‘key_finish’: ‘<leader>df’,  ‘key_breakpoint’: ‘<leader>db’,  ‘key_frameup’: ‘<leader>dp’,  ‘key_framedown’: ‘<leader>dn’,  ‘key_eval’: ‘<leader>de’,  ‘set_tkeymaps’: “NvimGdbNoTKeymaps”,  } &quot; TODO: Investigate whether key_eval binds both normal and visual eval</p>
<p>“Investigate:” SimplyFold &quot; git &quot; vim-fugitive &quot; indent &quot; vim-python-pep8-indent<F13> &quot; completion &quot; youcompleteme &quot; ncm2 &quot; deoplete &quot; jedi-vim &quot; completor.vim &quot; lint &quot; ale &quot; languageclient-neovim &quot; vim-flake8 “syntax” python-syntax &quot; python-mode “autoformat” yapf &quot; vim-autofromat “Plugins to investigate” honza/vim-snippets &quot; dense-analysis/ale &quot; autocomplete &quot; youcompleteme “vim-markdown”supertab &quot; vim-multiple-cursors &quot; tpope/sensible-vim &quot; vim-gitgutter &quot; powerline or vim-airline and/or vim-airline-themes (select one without Univode for WSL) &quot; Plugin ‘Lokaltog/powerline’, {‘rtp’: ‘powerline/bindings/vim/’} &quot; ctrlp &quot; tabular &quot; denite or fzf &quot; undotree &quot; indent guides &quot; vim-surround &quot; vim-endwise &quot; commentary &quot; matchit (see <a href="https://catonmat.net/vim-plugins-matchit-vim" class="uri">https://catonmat.net/vim-plugins-matchit-vim</a>) “Outdated plugins that need to be rewritten”Plug ‘dag/vim-fish’</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
